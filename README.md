## üìñ –û–ø–∏—Å–∞–Ω–∏–µ 

–î–∞–Ω–Ω—ã–π –ø—Ä–æ–µ–∫—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç –Ω–∞–±–æ—Ä –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –∏ —Å–∫—Ä–∏–ø—Ç–æ–≤ –¥–ª—è –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è –Ω–∞–≥—Ä—É–∑–æ—á–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å–µ—Ä–≤–∏—Å–∞ **web-superapp.moya-smena.ru** —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ **K6**.

### –¶–µ–ª–µ–≤–æ–π —Å–µ—Ä–≤–∏—Å

- **URL**: https://web-superapp.moya-smena.ru/
- **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**: Client-Side Rendering (CSR) –Ω–∞ –±–∞–∑–µ Flutter Web
- **Backend API**: https://platform.moya-smena.ru/api/superapp/v1/

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
LoadTestingK6/
‚îú‚îÄ‚îÄ har/                                  # HAR —Ñ–∞–π–ª—ã —Å –∑–∞–ø–∏—Å–∞–Ω–Ω—ã–º–∏ –∑–∞–ø—Ä–æ—Å–∞–º–∏
‚îÇ   ‚îî‚îÄ‚îÄ requests_for_load_testing.har    # –ò—Å—Ö–æ–¥–Ω—ã–π HAR —Ñ–∞–π–ª (53 URL)
‚îÇ
‚îú‚îÄ‚îÄ k6-tests/                            # K6 —Ç–µ—Å—Ç—ã (—Å–æ–∑–¥–∞–µ—Ç—Å—è –ø—Ä–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏)
‚îÇ   ‚îú‚îÄ‚îÄ config/                          # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ endpoints.js                 # API endpoints –∏ URL
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ headers.js                   # HTTP –∑–∞–≥–æ–ª–æ–≤–∫–∏
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ test-data.js                 # –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
‚îÇ   ‚îú‚îÄ‚îÄ scenarios/                       # –°—Ü–µ–Ω–∞—Ä–∏–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ api-load-test.js            # –¢–µ—Å—Ç—ã Backend API
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ static-resources-test.js    # –¢–µ—Å—Ç—ã —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ä–µ—Å—É—Ä—Å–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ utils/                           # –£—Ç–∏–ª–∏—Ç—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ checks.js                    # –§—É–Ω–∫—Ü–∏–∏ –ø—Ä–æ–≤–µ—Ä–æ–∫
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ helpers.js                   # –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
‚îÇ   ‚îî‚îÄ‚îÄ main.js                          # –ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª –∑–∞–ø—É—Å–∫–∞
‚îÇ
‚îú‚îÄ‚îÄ results/                             # –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–æ–≤ (—Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
‚îÇ
‚îú‚îÄ‚îÄ EXTRACTED_URLS.md                    # üîó –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ URL –∏–∑ HAR
‚îú‚îÄ‚îÄ QUICK_START_EXAMPLE.js               # üöÄ –ì–æ—Ç–æ–≤—ã–π –ø—Ä–∏–º–µ—Ä –¥–ª—è –∑–∞–ø—É—Å–∫–∞
‚îî‚îÄ‚îÄ README.md                            # üìñ –≠—Ç–æ—Ç —Ñ–∞–π–ª
```

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### –û—Å–Ω–æ–≤–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

| –§–∞–π–ª | –û–ø–∏—Å–∞–Ω–∏–µ | –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å |
|------|----------|-------------------|
| **[EXTRACTED_URLS.md](EXTRACTED_URLS.md)** | –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö URL –∏–∑ HAR —Å –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏–µ–π –∏ –ø—Ä–∏–º–µ—Ä–∞–º–∏ | –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∫–æ–Ω—Ñ–∏–≥–æ–≤ –∏ —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ |
| **[QUICK_START_EXAMPLE.js](QUICK_START_EXAMPLE.js)** | –û—Å–Ω–æ–≤–Ω–æ–π —Ç–µ—Å—Ç |  |
| **[user_profile_load.js](user_profile_load.js)** | –¢–µ—Å—Ç –Ω–∞ –ø—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |  |

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≥–æ—Ç–æ–≤—ã–π –ø—Ä–∏–º–µ—Ä

```bash
# 1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ K6 —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
k6 version

# 2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –≥–æ—Ç–æ–≤—ã–π –ø—Ä–∏–º–µ—Ä (Smoke Test)
k6 run --env PROFILE=smoke QUICK_START_EXAMPLE.js

# 3. –ò–ª–∏ Load Test
k6 run --env PROFILE=load QUICK_START_EXAMPLE.js
```
---

## üéØ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π Endpoint Test

–î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –æ—Ç–¥–µ–ª—å–Ω—ã—Ö endpoint'–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `endpoint_load_test.js`:

```bash
# –ë–∞–∑–æ–≤—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å
k6 run --env AUTH_TOKEN=<—Ç–æ–∫–µ–Ω> --env ENDPOINT=<–ø—É—Ç—å> --env PROFILE=<–ø—Ä–æ—Ñ–∏–ª—å> endpoint_load_test.js

# –ü—Ä–∏–º–µ—Ä—ã
# 15 RPS (20 VUs)
k6 run --env AUTH_TOKEN=<—Ç–æ–∫–µ–Ω> --env ENDPOINT=/employees/me/ --env API_VERSION=v2 --env PROFILE=profile_15 endpoint_load_test.js

# 30 RPS (28 VUs)
k6 run --env AUTH_TOKEN=<—Ç–æ–∫–µ–Ω> --env ENDPOINT=/employees/addresses/ --env PROFILE=profile_30 endpoint_load_test.js
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `AUTH_TOKEN` - —Ç–æ–∫–µ–Ω –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π)
- `ENDPOINT` - –ø—É—Ç—å endpoint'–∞, –Ω–∞–ø—Ä–∏–º–µ—Ä `/employees/me/` (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π)
- `API_VERSION` - –≤–µ—Ä—Å–∏—è API: `v1` –∏–ª–∏ `v2` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `v1`)
- `PROFILE` - –ø—Ä–æ—Ñ–∏–ª—å –Ω–∞–≥—Ä—É–∑–∫–∏: `profile_15` (~15 RPS) –∏–ª–∏ `profile_30` (~30 RPS) (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `profile_15`)

### –ó–∞–ø—É—Å–∫ Quick Start Example

#### Smoke Test (5 VUs, 1 –º–∏–Ω—É—Ç–∞)
```bash
k6 run --env PROFILE=smoke QUICK_START_EXAMPLE.js
```

#### Load Test (50 VUs, 9 –º–∏–Ω—É—Ç)
```bash
k6 run --env PROFILE=load QUICK_START_EXAMPLE.js
```

#### Stress Test (–¥–æ 200 VUs, 15 –º–∏–Ω—É—Ç)
```bash
k6 run --env PROFILE=stress QUICK_START_EXAMPLE.js
```

### –ó–∞–ø—É—Å–∫ –¢–µ—Å—Ç–∞ –Ω–∞ –ø—Ä–æ—Ñ–∏–ª—å (–æ—Å—Ç–∞–ª—å–Ω—ã–µ –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ, –Ω—É–∂–Ω–æ —Ç–æ–ª—å–∫–æ –Ω–∞–∑–≤–∞–Ω–∏—è –º–µ–Ω—è—Ç—å
```bash
k6 run --env PROFILE=profile_30 user_profile_load.js
```


### –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

#### –í JSON —Ñ–∞–π–ª
```bash
k6 run --out json=results/output.json QUICK_START_EXAMPLE.js
```

#### –í CSV —Ñ–∞–π–ª (—Å –ø–æ–º–æ—â—å—é xk6)
```bash
# –¢—Ä–µ–±—É–µ—Ç xk6 —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è
xk6 run --out csv=results/output.csv QUICK_START_EXAMPLE.js
```
---

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

### –ö–æ–Ω—Å–æ–ª—å–Ω—ã–π –≤—ã–≤–æ–¥

K6 –≤—ã–≤–æ–¥–∏—Ç –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏:
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö VUs
- –ü—Ä–æ–≥—Ä–µ—Å—Å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- –ú–µ—Ç—Ä–∏–∫–∏ (RPS, response time, errors)
- –°—Ç–∞—Ç—É—Å checks
---

## üìà –ü—Ä–æ—Ñ–∏–ª–∏ –Ω–∞–≥—Ä—É–∑–∫–∏

### Smoke Test
- **VUs**: 1-5
- **Duration**: 1 –º–∏–Ω—É—Ç–∞
- **–¶–µ–ª—å**: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ —Ç–µ—Å—Ç–æ–≤

### Load Test
- **VUs**: 0 ‚Üí 50 (2 –º–∏–Ω) ‚Üí 50 (5 –º–∏–Ω) ‚Üí 0 (2 –º–∏–Ω)
- **Duration**: 9 –º–∏–Ω—É—Ç
- **–¶–µ–ª—å**: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏ –æ–±—ã—á–Ω–æ–π –Ω–∞–≥—Ä—É–∑–∫–µ

### Stress Test
- **VUs**: 0 ‚Üí 100 ‚Üí 200 ‚Üí 0
- **Duration**: 15 –º–∏–Ω—É—Ç
- **–¶–µ–ª—å**: –ü–æ–∏—Å–∫ –ø—Ä–µ–¥–µ–ª–æ–≤ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

---

## üîç –ú–µ—Ç—Ä–∏–∫–∏ –∏ Thresholds

### –û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏

- `http_req_duration` - –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞
- `http_req_failed` - –ø—Ä–æ—Ü–µ–Ω—Ç –æ—à–∏–±–æ–∫
- `http_reqs` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ —Å–µ–∫—É–Ω–¥—É
- `checks` - –ø—Ä–æ—Ü–µ–Ω—Ç —É—Å–ø–µ—à–Ω—ã—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫

### –ù–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –ø–æ—Ä–æ–≥–∏

```javascript
thresholds: {
  'http_req_duration': ['p(95)<500', 'p(99)<1000'],  // 95% < 500ms
  'http_req_failed': ['rate<0.01'],                   // –û—à–∏–±–æ–∫ < 1%
  'checks': ['rate>0.95'],                            // 95% checks OK
  'api_errors': ['rate<0.01'],                        // API –æ—à–∏–±–æ–∫ < 1%
}
```

---

